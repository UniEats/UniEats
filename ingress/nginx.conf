server {
	listen 80;
	server_name _;

	location /api {
		rewrite /api/(.*) /$1 break;
		proxy_pass http://backend:8080;
	}

	location /v3/api-docs {
		proxy_pass http://backend:8080$request_uri;
	}

	location /swagger-ui {
		proxy_pass http://backend:8080$request_uri;
	}

	location / {
		proxy_pass http://frontend:80;
	}

	proxy_set_header Host $http_host;
	proxy_set_header X-Forwarded-Host $http_host;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto https;
	proxy_set_header X-Forwarded-Port 443;
}
